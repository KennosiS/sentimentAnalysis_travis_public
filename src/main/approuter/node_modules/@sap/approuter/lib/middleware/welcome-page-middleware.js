'use strict';

module.exports = function welcomePage(req, res, next) {
  var welcomeFile = req.routerConfig.appConfig.welcomeFile;
  if (welcomeFile && /^\/(\?.*$)?$/.test(req.url)) {
    var tracer = req.loggingContext.getTracer();
    if (welcomeFile[0] !== '/') {
      welcomeFile = '/' + welcomeFile;
    }
    tracer.info('Incoming request: "%s" will use welcome page "%s"', req.url, welcomeFile);
    req.url = welcomeFile;
  }
  next();
};
